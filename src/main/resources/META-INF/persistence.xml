<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="https://jakarta.ee/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="https://jakarta.ee/xml/ns/persistence
                                 https://jakarta.ee/xml/ns/persistence/persistence_3_1.xsd"
             version="3.1">

  <!-- Persistence unit name used in Persistence.createEntityManagerFactory("myPU") -->
  <persistence-unit name="persistence" transaction-type="RESOURCE_LOCAL">
    <!-- If you want Hibernate to scan your application for @Entity classes automatically,
         omit <class> entries. To speed startup or when entities live in other modules,
         list them explicitly with <class>...</class> -->
    <!-- Example: <class>com.example.model.MyEntity</class> -->

    <class>br.ufpr.entity.avaliacao.Alternativa</class>
    <class>br.ufpr.entity.avaliacao.Avaliacao</class>
    <class>br.ufpr.entity.avaliacao.Questao</class>
    <class>br.ufpr.entity.avaliacao.Resposta</class>
    <class>br.ufpr.entity.avaliacao.RespostaQuestao</class>
    <class>br.ufpr.entity.curso.UnidadeCurricular</class>
    <class>br.ufpr.entity.curso.Curso</class>
    <class>br.ufpr.entity.curso.Curriculo</class>
    <class>br.ufpr.entity.pessoa.Pessoa</class>
    <class>br.ufpr.entity.pessoa.TipoPessoa</class>
    

    <!-- Provider class for Hibernate JPA -->
    <provider>org.hibernate.jpa.HibernatePersistenceProvider</provider>

    <!-- ====== Option A: RESOURCE_LOCAL (JDBC properties inline) ====== -->
    <!-- Good for servlet containers (Tomcat) or standalone apps where you manage connections -->
    <properties>
      <!-- Standard Jakarta Persistence JDBC props -->
      <property name="jakarta.persistence.jdbc.driver" value="org.postgresql.Driver"/>
      <property name="jakarta.persistence.jdbc.url"    value="jdbc:postgresql://localhost:8081/lpoo2database"/>
      <property name="jakarta.persistence.jdbc.user"   value="usuario"/>
      <property name="jakarta.persistence.jdbc.password" value="admin"/>

      <!-- Hibernate-specific configuration -->
      <!-- Use the dialect matching your DB. Replace with the correct dialect class. -->
      <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>

      <!-- Schema generation: none|create|drop-and-create|update -->
      <!-- For production, prefer none or validate. For dev you may use update or create. -->
      <property name="jakarta.persistence.schema-generation.database.action" value="update"/>

      <!-- Show SQL for debugging -->
      <property name="hibernate.show_sql" value="true"/>
      <property name="hibernate.format_sql" value="true"/>

      <!-- Second-level cache and other options (enable if you add a cache provider) -->
      <!-- <property name="hibernate.cache.use_second_level_cache" value="true"/> -->
      <!-- <property name="hibernate.cache.region.factory_class" value="org.hibernate.cache.jcache.JCacheRegionFactory"/> -->

      <!-- Connection pool hints (if using an embedded pool like Hikari via properties) -->
      <!-- Example when using HikariCP via JPA-bootstrapping or programmatic config:
           hibernate.connection.provider_class, or set up a DataSource in code/containers -->
    </properties>

    <!-- ====== Option B: JTA / App-server-managed datasource (example) ======
         Uncomment the following block and change transaction-type="JTA" and jta-data-source
         if you run on an app server (WildFly, Payara, etc.) that exposes a JNDI datasource.
    -->
    <!--
    <persistence-unit name="myPU" transaction-type="JTA">
      <jta-data-source>java:jboss/datasources/MyDS</jta-data-source>
      <provider>org.hibernate.jpa.HibernatePersistenceProvider</provider>
      <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
        <property name="jakarta.persistence.schema-generation.database.action" value="validate"/>
        <property name="hibernate.show_sql" value="false"/>
      </properties>
    </persistence-unit>
    -->

  </persistence-unit>
</persistence>
